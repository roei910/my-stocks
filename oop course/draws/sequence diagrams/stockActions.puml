@startuml
actor User
participant "Frontend (UI)" as UI
participant "Backend (API)" as API
database Database

User -> UI: View stock details
UI -> API: Check user connection
alt User not connected
    API -> UI: Redirect to login page
    UI --> User: Show login page
else User connected
    User -> UI: Choose action (Set notification or Add to portfolio)
    alt Set notification
        User -> UI: Enter threshold price
        UI -> API: Send notification request
        API -> API: Validate input
        alt Valid input
            API -> Database: Save notification details
            Database --> API: Notification saved
            API -> UI: Send success response
            UI --> User: Show success message
        else Invalid input
            API -> UI: Send error response
            UI --> User: Show error message
        end
    else Add to portfolio
        User -> UI: Enter portfolio name
        UI -> API: Send add-to-portfolio request
        API -> Database: Check if portfolio name exists
        alt Portfolio name invalid
            Database --> API: Invalid name
            API -> UI: Send error response
            UI --> User: Show error message
        else Portfolio name valid
            Database --> API: Name valid
            API -> Database: Add stock to portfolio
            Database --> API: Stock added
            API -> UI: Send success response
            UI --> User: Show success message
        end
    end
end
@enduml